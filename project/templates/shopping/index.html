{% extends "/base/base.html" %}

{% block title %}
    Shopping
{% endblock %}
{% block script %}
{% endblock %}
{% block style %}
    <link rel="stylesheet" href="{{ url_for('static',filename='css/shopping/index.css') }}">

    <style>
        .index-item-container-box {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
        }

        .index-item-container {
            width: 80%;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: flex-start;
            align-content: flex-start;
            margin: auto;
            background-color: #f1f1f1;
        }

        {#body {#}
        {#    margin: 0;#}
        {#    padding: 0;#}
        {#    background: #000;#}
        {#    overflow: hidden;#}
        {#{#}
        #}#}
        {##}
        {#canvas {#}
        {#    background-size: cover;#}
        {#    background: url("../../static/image/shopping/1x.png") no-repeat center center;#}
        {#{#}
        #}#}

        .index-item {
            width: 270px;
            margin: 20px;
            padding: 5px;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            align-items: center;
            border: 3px solid lightgray;
        }

        .index-item:hover {
            border: 3px solid orange;
        }

        .index-item-image {
            width: 240px;
            height: 200px;
        }

        .index-item-image:hover {
            transform: scale(1.1);
            -ms-transform: scale(1.1);
            /* IE 9 */
            -webkit-transform: scale(1.1);
            /* Safari and Chrome */
            -o-transform: scale(1.1);
            /* Opera */
            -moz-transform: scale(1.1);
        }

        .index-product-view-title {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .product-view-title-text {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 80%;
            height: 100px;
            color: #ff1393;
            background: -webkit-gradient(
                    linear,
                    left bottom,
                    right top,
                    color-stop(0.02, rgb(249, 188, 201)),
                    color-stop(0.51, rgb(243, 255, 76)),
                    color-stop(0.87, rgb(252, 207, 227))
            );
            background: -moz-linear-gradient(
                    left bottom,
                    rgb(249, 188, 201) 2%,
                    rgb(255, 228, 76) 51%,
                    rgb(252, 207, 227) 87%
            );
        }

        .index-item-text {
            width: 100%;
        }

        .index-item-text * {
            padding: 10px;
        }

        .index-item-price {
            color: mediumpurple;
            font-weight: bold;
            font-size: 20px;

        }

        .index-item-name {
            text-decoration: none;
            color: orange;
            font-size: 18px;
            font-weight: bold;
        }

        .index-item-name:hover {
            text-decoration: none;
            color: #d73290;
        }

        .index-product-recommendation-title {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .product-recommendation-title-text {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 80%;
            height: 100px;
            color: #ff1393;
            background: -webkit-gradient(
                    linear,
                    left bottom,
                    right top,
                    color-stop(0.02, rgb(249, 188, 201)),
                    color-stop(0.51, rgb(243, 255, 76)),
                    color-stop(0.87, rgb(252, 207, 227))
            );
            background: -moz-linear-gradient(
                    left bottom,
                    rgb(249, 188, 201) 2%,
                    rgb(255, 228, 76) 51%,
                    rgb(252, 207, 227) 87%
            );
        }
    </style>
{% endblock %}

{% block content %}

    <div class="index-container">
        <div class="index-upper">
            <img class="index-logo-img" src="../../static/image/shopping/img_4.png" alt="">
            <div class="index-search-box">
                <form action="#" method="post" name="search">
                    <input class="index-search-text">
                    <input class="index-search-submit-button" type="submit" value="">
                </form>
            </div>
            <div class="my-basket-box">
                <a class="index-basket-group" href="{{ url_for("cart.shopping_cart") }}">

                    <span class="index-basket-icon">
                        <p class="index-basket-text">My Shopping Cart</p>
                    <i class="fas fa-cart-arrow-down"></i>
                </span>
                </a>

            </div>
        </div>

        {#        hot items recommendation#}
        <div class="index-product-recommendation-title">
            <h1 class="product-recommendation-title-text">Welcome</h1>
        </div>
        <div class="index-item-container-box">
            <div class="index-item-container">

                <div class="shell">
                    <ui class="index-banner-images-box">
                        <li class="index-banner-image"></li>
                        <li class="index-banner-image"></li>
                        <li class="index-banner-image"></li>
                    </ui>
                    <ui class="index-banner-min-images-box">
                        <li class="index-banner-min-image"></li>
                        <li class="index-banner-min-image"></li>
                        <li class="index-banner-min-image"></li>
                    </ui>
                    <div class="index-banner-button">
                        <div class="index-banner-button-left"></div>
                        <div class="index-banner-button-right"></div>
                    </div>
                </div>
            </div>
        </div>


    </div>


    <br>
    <br>


    {#        product viewing area#}
    <div class="index-product-view-title">
        <h1 class="product-view-title-text">Recommended</h1>
    </div>
    <div class="index-item-container-box">
        <div class="index-item-container">

            {% for item in items %}
                <div class="index-item">
                    <a href="{{ url_for("item.details", itemID=item.id) }}"> <img class="index-item-image"
                                                                                  src="{{ url_for('static', filename='uploaded_files/'+item.main_image_url) }}"
                                                                                  value="Item Image"></a>
                    <div class="index-item-text">
                        <p class="index-item-price">$ {{ item.price }}</p>
                        <a class="index-item-name"
                           href="{{ url_for("item.details", itemID=item.id) }}">{{ item.name }}</a>
                        <p class="index-item-inventory">{{ item.inventory }} in warehouse</p>
                        <p class="index-item-description">{{ item.description }}</p>
                    </div>


                </div>
            {% endfor %}


        </div>

    </div>

    <br>
    <br>

    {# Shops area#}
    {% for shop in shop_sellers %}
        <div class="index-product-view-title">
            <h1 class="product-view-title-text">
                Shop Name: {{ shop.username }}
            </h1>
        </div>
        <div class="index-item-container-box">
            <div class="index-shoes-container">
                <div class="index-shoes-box">
                    <div class="left-big-img">
                        <a href="#" target="_blank">
                            <img width="360" height="430" src="../../static/image/shopping/1x.png"></a>
                    </div>
                    <div class="right-img-area">
                        <div class="right-small-img">
                            {% for item in shop_sellers[shop] %}
                                <a href="#" target="_blank">
                                <img id="right-small-image" src="{{ url_for('static', filename='uploaded_files/'+item.main_image_url) }}"></a>
                            {% endfor %}

                            {#                        <a href="#" target="_blank">#}
                            {#                            <img width="160" height="230" src="../../static/image/shopping/1x.png"></a>#}
                            {#                        <a href="#" target="_blank">#}
                            {#                            <img width="160" height="230" src="../../static/image/shopping/1x.png"></a>#}
                            {#                        <a href="#" target="_blank">#}
                            {#                            <img width="160" height="180" src="../../static/image/shopping/1x.png"></a>#}
                            {#                        <a href="#" target="_blank">#}
                            {#                            <img width="160" height="180" src="../../static/image/shopping/1x.png"></a>#}
                            {#                        <a href="#" target="_blank">#}
                            {#                            <img width="160" height="180" src="../../static/image/shopping/1x.png"></a>#}
                        </div>
                    </div>

                </div>
            </div>
        </div>

    {% endfor %}


    <div class="index-product-view-title">
        <h1 class="product-view-title-text">Shops Zone</h1>
    </div>
    <div class="index-item-container-box">
        <div class="index-shoes-container">
            <div class="index-shoes-box">
                <div class="left-big-img">
                    <a href="#" target="_blank">
                        <img width="360" height="430" src="../../static/image/shopping/1x.png"></a>
                </div>
                <div class="right-img-area">
                    <div class="right-small-img">
                        <a href="#" target="_blank">
                            <img width="160" height="230" src="../../static/image/shopping/1x.png"></a>
                        <a href="#" target="_blank">
                            <img width="160" height="230" src="../../static/image/shopping/1x.png"></a>
                        <a href="#" target="_blank">
                            <img width="160" height="230" src="../../static/image/shopping/1x.png"></a>
                        <a href="#" target="_blank">
                            <img width="160" height="180" src="../../static/image/shopping/1x.png"></a>
                        <a href="#" target="_blank">
                            <img width="160" height="180" src="../../static/image/shopping/1x.png"></a>
                        <a href="#" target="_blank">
                            <img width="160" height="180" src="../../static/image/shopping/1x.png"></a>
                    </div>
                </div>

            </div>
        </div>
    </div>



    {% block jsfoot %}
        <script>
            let left = document.querySelector(".index-banner-button-left")
            let right = document.querySelector(".index-banner-button-right")
            let min = document.querySelectorAll(".index-banner-min-image")
            let images = document.querySelector(".index-banner-images-box")
            // First set an index to calculate and control the position of the image, and then set a time as a timer
            let index = 0
            let time

            // Here first create a position as a reuse function, the role is to combine index to define the current image position
            function position() {
                images.style.top = (index * -100) + "%"
            }

            // Then create a reuse function add as an add function, if the current image position value index is
            // greater than or equal to the current number of images,
            // it means that the calculation range is exceeded, so we have to clear zero, if not index will be added one
            function add() {
                if (index >= min.length - 1) {
                    index = 0
                } else {
                    index++
                }
            }

            // Conversely desc is a minus function, if the current image position value index is less than 1,
            // then his value will bounce to the top, that is, the last of the rotation map, if not index will be minus one
            function desc() {
                if (index < 1) {
                    index = min.length - 1
                } else {
                    index--
                }
            }

            // Create a timer to be used as a function of reuse time,, index every 3 seconds to add one,
            // and then add add add function and desc function to determine a bit, and then add the positioning function
            function timer() {
                time = setInterval(() => {
                    index++
                    desc()
                    add()
                    position()
                }, 2000)
            }

            // Set the button, left for the left button, because when you click the picture will be backwards in the opposite direction,
            // so set into the desc minus function into, positioning
            left.addEventListener("click", () => {
                desc()
                position()
                clearInterval(time)
                timer()
            })
            // similar for the right button
            right.addEventListener("click", () => {
                add()
                position()
                clearInterval(time)
                timer()
            })
            // When you get the left and right buttons, you also need to take effect the small picture button below.
            // First iterate through it, then get the value of the currently clicked small image button and assign it to index, then jump
            for (let i = 0; i < min.length; i++) {
                min[i].addEventListener("click", () => {
                    index = i
                    position()
                    clearInterval(time)
                    timer()
                })
            }
            // Turn the timer on
            timer()
        </script>

    {% endblock %}



{% endblock %}
